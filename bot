import logging
import random
import time
import asyncio
import json
from datetime import datetime
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, CallbackQueryHandler, filters, ContextTypes
from telegram.error import TelegramError

# ØªÙ†Ø¸ÛŒÙ… Ù„ÙˆÚ¯ÛŒÙ†Ú¯ Ø®ÙÙ†
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO,
    handlers=[logging.FileHandler("bot_log.log"), logging.StreamHandler()]
)
logger = logging.getLogger(__name__)

# ØªÙˆÚ©Ù† Ø¨Ø§Øª
TOKEN = '7904555787:AAG2_KfWdXKXKYqtIVg4zLg2b87OKIzf9nM'

# Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø¨Ø§Øª
CREATOR = "ÛŒÙ‡ Ø®ÙÙ† Ø¨Ù‡ Ø§Ø³Ù… AKKing Ø§ÛŒÙ† ØºÙˆÙ„ +18 Ø±Ùˆ Ø³Ø§Ø®ØªÙ‡!"

# Ø¢ÛŒØ¯ÛŒ Ø§Ø¯Ù…ÛŒÙ† (Ø¢ÛŒØ¯ÛŒ Ø®ÙˆØ¯ØªÙˆ Ø¨Ø°Ø§Ø±)
ADMIN_ID = 6289381027  # Ø¢ÛŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…Øª Ø±Ùˆ Ø¨Ø°Ø§Ø±

# Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø³Ø§Ø¯Ù‡ (Ø°Ø®ÛŒØ±Ù‡ ØªÙˆ ÙØ§ÛŒÙ„)
DATA_FILE = "bot_data.json"

# Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§ÛŒ Ø¨Ù†â€ŒØ´Ø¯Ù‡ØŒ Ù…ÛŒÙˆØªâ€ŒØ´Ø¯Ù‡ØŒ Ù„Ù‚Ø¨â€ŒÙ‡Ø§ØŒ Ø§Ù…ØªÛŒØ§Ø²Ø§Øª Ùˆ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§
BANNED_USERS = set()
MUTED_USERS = {}
NICKNAMES = {}
SCORES = {}
WARNINGS = {}

# Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯ÛŒØªØ§ Ø§Ø² ÙØ§ÛŒÙ„
def load_data():
    global BANNED_USERS, MUTED_USERS, NICKNAMES, SCORES, WARNINGS
    try:
        with open(DATA_FILE, 'r') as f:
            data = json.load(f)
            BANNED_USERS = set(data.get("banned", []))
            MUTED_USERS = {int(k): v for k, v in data.get("muted", {}).items()}
            NICKNAMES = {int(k): v for k, v in data.get("nicknames", {}).items()}
            SCORES = {int(k): v for k, v in data.get("scores", {}).items()}
            WARNINGS = {int(k): v for k, v in data.get("warnings", {}).items()}
    except FileNotFoundError:
        pass

# Ø°Ø®ÛŒØ±Ù‡ Ø¯ÛŒØªØ§ ØªÙˆ ÙØ§ÛŒÙ„
def save_data():
    data = {
        "banned": list(BANNED_USERS),
        "muted": {str(k): v for k, v in MUTED_USERS.items()},
        "nicknames": {str(k): v for k, v in NICKNAMES.items()},
        "scores": {str(k): v for k, v in SCORES.items()},
        "warnings": {str(k): v for k, v in WARNINGS.items()}
    }
    with open(DATA_FILE, 'w') as f:
        json.dump(data, f)

# Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø¬ÙˆØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø§ ÙØ­Ø´Ø§ÛŒ +18
RESPONSES = {
    "Ø³Ù„Ø§Ù…": "Ø³Ù„Ø§Ù… Ú©Øµâ€ŒÚ©Ø´! Ú†Ø·ÙˆØ±ÛŒ Ø¹Ø´Ù‚Ù…ØŸ",
    "hi": "Hey motherfucker! Whatâ€™s good?",
    "Ø®Ø¯Ø§ÙØ¸": "Ø¨Ø±Ùˆ Ú¯Ù…Ø´Ùˆ Ú©ÙˆÙ†ÛŒ! Ø¯Ù„Ù… Ø¨Ø±Ø§Øª ØªÙ†Ú¯ Ù…ÛŒâ€ŒØ´Ù‡!",
    "bye": "Fuck off, asshole! Catch ya later!",
    "Ø¹Ø´Ù‚Ù…": "Ø¬Ø§Ù†Ù… Ú©ÛŒØ±Ù…ØŸ Ø¨Ú¯Ùˆ Ú†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒØŒ Ø¨Ø±Ø§Øª Ø¬ÙˆÙ†Ù…Ù… Ù…ÛŒâ€ŒØ¯Ù…!",
    "Ø¨ÙˆØ³": "Ù…Ø§Ú†! Ø¨ÛŒØ§ Ú©ØµØªÙˆ Ø¨Ø®ÙˆØ±Ù…!",
    "sex": "Ø§ÙˆÙˆÙˆØŒ Ú©ÛŒØ±Øª Ø±Ø§Ø³Øª Ø´Ø¯Ù‡ØŸ Ø¨ÛŒØ§ pm Ø­Ø§Ù„ Ú©Ù†ÛŒÙ…!",
    "ÙØ­Ø´": "Ú©ÛŒØ±Ù… ØªÙˆ Ú©ØµØª! Ø±Ø§Ø¶ÛŒ Ø´Ø¯ÛŒ Ø¬Ù†Ø¯Ù‡ØŸ",
    "shit": "Ú¯ÙˆÙ‡ Ù†Ø®ÙˆØ± Ú©Øµâ€ŒÚ©Ø´! Ø¨Ú¯Ùˆ Ú†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ!",
    "Ú©ÛŒØ±": "Ú©ÛŒØ±Ù… ØªÙˆ Ø¯Ù‡Ù†Øª! Ú†ÛŒÙ‡ØŸ Ú†ÛŒØ²ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒØŸ",
    "Ú©ÙˆÙ†": "Ú©ÙˆÙ†Øª Ø±Ùˆ Ø¬Ø± Ø¨Ø¯Ù…ØŸ Ø¨Ú¯Ùˆ Ú†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ!"
}

# Ù„ÛŒØ³Øª Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒ Ø®ÙÙ†
PHOTOS = [
    "https://i.imgur.com/8J5z7xM.jpeg",
    "https://i.imgur.com/kJ3mX9P.jpeg",
    "https://i.imgur.com/9pL2mQv.jpeg"
]

# Ø¬ÙˆÚ©â€ŒÙ‡Ø§ÛŒ +18 Ø®ÙÙ† Ùˆ ÙØ­Ø´â€ŒØ¯Ø§Ø±
JOKES_18 = [
    "ÛŒÙ‡ Ø±ÙˆØ² Ø§ÙˆÙ…Ø¯Ù… Ø¨Ù‡ Ø²Ù†Ù… Ø¨Ú¯Ù… 'Ø¨ÛŒØ§ Ø³Ú©Ø³ Ú©Ù†ÛŒÙ…'ØŒ Ú¯ÙØª 'Ú©ÛŒØ±Ù…Ùˆ ÙˆÙ„ Ú©Ù†ØŒ Ø¯Ø§Ø±Ù… Ø³Ø±ÛŒØ§Ù„ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…!'",
    "Ú†Ø±Ø§ Ú©ØµÙ… Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø§ØºÙ‡ØŸ Ú†ÙˆÙ† Ù‡Ø± Ø±ÙˆØ² Ø¯Ù†Ø¨Ø§Ù„ ÛŒÙ‡ Ú©ÛŒØ± Ø¬Ø¯ÛŒØ¯Ù…!",
    "Ø¯Ø®ØªØ±Ù‡ Ø¨Ù‡Ù… Ú¯ÙØª 'ÙÙ‚Ø· Ø¨Ù‡ Ú©ÙˆÙ† ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒ'ØŒ Ú¯ÙØªÙ… 'Ø¢Ø±Ù‡ØŒ Ú†ÙˆÙ† Ú©ÙˆÙ† ØªÙˆ Ù…Ø«Ù„ Ù…Ø§Ù‡Ù‡!'",
    "ÛŒÙ‡ Ø±ÙˆØ² Ø§ÙˆÙ…Ø¯Ù… Ø®ÙˆØ¯Ù…Ùˆ Ø¨Ù…Ø§Ù„Ù…ØŒ Ú©ÛŒØ±Ù… Ú¯ÙØª 'Ø¯ÛŒÚ¯Ù‡ Ú¯ÙˆÙ‡ Ù†Ø®ÙˆØ±ØŒ Ø¨Ø±Ùˆ ÛŒÙ‡ Ú©Øµ Ù¾ÛŒØ¯Ø§ Ú©Ù†!'",
    "Ø´ÙˆÙ‡Ø±Ù… ØªÙˆ Ø±Ø®ØªØ®ÙˆØ§Ø¨ Ø§Ù†Ù‚Ø¯Ø± Ú¯ÙˆÙ‡Ù‡ Ú©Ù‡ Ú©ÛŒØ±Ø´ ÙÙ‚Ø· Ø®ÙˆØ§Ø¨Ø´Ùˆ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù‡!",
    "Ø¯Ø®ØªØ±Ù‡ pm Ø¯Ø§Ø¯ØŒ Ø±ÙØªÙ… Ø¯ÛŒØ¯Ù… Ø³Ø§Ø¹Øª Û´ Ø¹ØµØ±ØŒ Ú©Øµâ€ŒØ®Ù„ ÙÚ©Ø± Ú©Ø±Ø¯Ù‡ Ø´Ø¨ Ø´Ø¯Ù‡!",
    "Ø¨Ù‡ Ø±ÙÛŒÙ‚Ù… Ú¯ÙØªÙ… 'Ú©ÛŒØ±Ù… Ú¯Ø´Ù†Ø´Ù‡'ØŒ Ú¯ÙØª 'Ø¨Ø±Ùˆ Ú¯ÙˆÙ‡ Ø¨Ø®ÙˆØ±ØŒ Ø³ÛŒØ± Ù…ÛŒâ€ŒØ´Ù‡!'"
]

# ÙØ­Ø´â€ŒÙ‡Ø§ÛŒ Ø±Ù†Ø¯ÙˆÙ… +18
CURSES = [
    "Ú©ÛŒØ±Ù… ØªÙˆ Ú©Øµ Ù…Ø§Ø¯Ø±ØªØŒ Ø¬Ù†Ø¯Ù‡!",
    "Ú¯ÙˆÙ‡ Ù†Ø®ÙˆØ± Ú©ÙˆÙ†ÛŒØŒ Ø¨Ú¯Ùˆ Ú†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ!",
    "Ú©Øµ Ù†Ù†Øª Ø±Ùˆ Ø¨Ú¯Ø§Ù… ØªØ§ ØµØ¨Ø­!",
    "Ú©ÛŒØ± Ø®Ø± ØªÙˆ Ú©ÙˆÙ†ØªØŒ Ø­Ø§Ù„ Ú©Ø±Ø¯ÛŒØŸ",
    "Ø¬Ù†Ø¯Ù‡â€ŒØ®ÙˆÙ†Ù‡ Ø¨Ø§Ø² Ú©Ø±Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ú©Øµâ€ŒÚ©Ø´!",
    "Ú©ÛŒØ±Ù… ØªÙˆ Ú†Ø´Ø§ØªØŒ Ú©ÙˆØ± Ø´ÛŒ Ú¯ÙˆÙ‡!",
    "Ú©Øµâ€ŒÚ©Ø´ Ø¨ÛŒØ§ pmØŒ Ú©ÛŒØ±Ù… Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Øª!"
]

# Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ
ROASTS = [
    "ØªÙˆ Ø§Ù†Ù‚Ø¯Ø± Ú©ÙˆÙ†ÛŒ Ù‡Ø³ØªÛŒ Ú©Ù‡ Ú©ÛŒØ±Ù… Ø§Ø²Øª Ø®Ø¬Ø§Ù„Øª Ù…ÛŒâ€ŒÚ©Ø´Ù‡!",
    "Ú©Øµâ€ŒÚ©Ø´ØŒ ÙÚ©Ø± Ú©Ø±Ø¯ÛŒ Ú©ÛŒ Ù‡Ø³ØªÛŒØŸ Ø¨Ø±Ùˆ Ú¯ÙˆÙ‡ØªÙˆ Ø¨Ø´ÙˆØ±!",
    "Ø¨Ø§ Ø§ÙˆÙ† Ú©ÙˆÙ†Øª ÙÚ©Ø± Ú©Ø±Ø¯ÛŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù…Ù†Ùˆ Ø¨ØªØ±Ú©ÙˆÙ†ÛŒØŸ",
    "Ø¬Ù†Ø¯Ù‡ØŒ ÛŒÙ‡ Ú©Ù… Ú©Ù„Ø§Ø³ Ø¨Ø°Ø§Ø±ØŒ Ú©ÛŒØ±Ù… Ø®Ø³ØªÙ‡ Ø´Ø¯ Ø§Ø²Øª!"
]

# Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ´Ø§Ù…Ø¯Ú¯ÙˆÛŒÛŒ Ø®ÙÙ†
WELCOME_MESSAGES = [
    "ğŸ”¥ Ø³Ù„Ø§Ù… Ú©ÛŒØ±Ù…! Ø¨Ù‡ Ø¨Ø§Øª +18 AKKing Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ! ğŸ”¥",
    "ğŸ’¦ Ù‡ÛŒ Ú©Øµâ€ŒÚ©Ø´! Ù¾Ø´Ù…Ø§ØªÙˆ Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ù† Ú©Ù‡ Ø¨Ø±ÛŒØ²Ù‡! ğŸ’¦",
    "ğŸ† Ø³Ù„Ø§Ù… Ø¬Ù†Ø¯Ù‡! Ø¨ÛŒØ§ Ø¨Ø§ Ù…Ù† Ø­Ø§Ù„ Ú©Ù†! ğŸ†"
]

# Ø¯Ø³ØªÙˆØ± /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    load_data()
    if user_id in BANNED_USERS:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´ Ø¨Ù† Ø´Ø¯ÛŒ! Ú¯Ù…Ø´Ùˆ!")
        return
    SCORES.setdefault(user_id, 0)
    save_data()
    welcome = random.choice(WELCOME_MESSAGES) + f"\n{user} Ú©ÙˆÙ†ÛŒ! Ø¨ÛŒØ§ Ø­Ø§Ù„ Ú©Ù†ÛŒÙ…!\nØ¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øª Ø¯Ø³ØªÙˆØ±Ø§Øª: /help"
    keyboard = [
        [InlineKeyboardButton("Ø¬ÙˆÚ© +18", callback_data="joke"), InlineKeyboardButton("Ø¹Ú©Ø³ Ø®ÙÙ†", callback_data="photo")],
        [InlineKeyboardButton("ÙØ­Ø´ Ø¨Ø§Ø­Ø§Ù„", callback_data="curse"), InlineKeyboardButton("Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ", callback_data="roast")],
        [InlineKeyboardButton("Ø³Ø§Ø²Ù†Ø¯Ù… Ú©ÛŒÙ‡ØŸ", callback_data="creator"), InlineKeyboardButton("ØªØ§Ø³ Ø¨Ù†Ø¯Ø§Ø²", callback_data="dice")],
        [InlineKeyboardButton("Ø´ÛŒØ± ÛŒØ§ Ø®Ø·", callback_data="coin"), InlineKeyboardButton("Ø³Ø§Ø¹Øª", callback_data="time")],
        [InlineKeyboardButton("Ø±Ù†Ø¯ÙˆÙ… Ø¹Ø¯Ø¯", callback_data="roll"), InlineKeyboardButton("Ø§Ù…ØªÛŒØ§Ø²Ù…", callback_data="score")],
        [InlineKeyboardButton("Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³", callback_data="guess"), InlineKeyboardButton("Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ", callback_data="rps")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text(welcome, reply_markup=reply_markup)
    logger.info(f"Ú©ÙˆÙ†ÛŒ Ø¨Ù‡ Ø§Ø³Ù… {user} Ø¨Ø§Øª Ø±Ùˆ Ø§Ø³ØªØ§Ø±Øª Ú©Ø±Ø¯.")

# Ø¯Ø³ØªÙˆØ± /help (Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§)
async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¨Ù† Ø´Ø¯ÛŒØŒ Ú¯Ù…Ø´Ùˆ!")
        return
    
    help_msg = f"{user} Ú©ÙˆÙ†ÛŒ! Ø§ÛŒÙ†Ø§ Ø¯Ø³ØªÙˆØ±Ø§Øª Ù…Ù†Ù†:\n\n"
    help_msg += "Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ:\n"
    help_msg += "/start - Ø§Ø³ØªØ§Ø±Øª Ø¨Ø§ØªØŒ Ú©Øµâ€ŒÚ©Ø´!\n"
    help_msg += "/help - Ù‡Ù…ÛŒÙ† Ù„ÛŒØ³Øª Ø±Ùˆ Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡\n"
    help_msg += "/joke - ÛŒÙ‡ Ø¬ÙˆÚ© +18 Ø®ÙÙ†\n"
    help_msg += "/photo - ÛŒÙ‡ Ø¹Ú©Ø³ Ø¨Ø§Ø­Ø§Ù„\n"
    help_msg += "/curse - ÛŒÙ‡ ÙØ­Ø´ +18 Ø±Ù†Ø¯ÙˆÙ…\n"
    help_msg += "/roast - Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø®ÙÙ†\n"
    help_msg += "/creator - Ø¨Ú¯Ù‡ Ú©ÛŒ Ù…Ù†Ùˆ Ø³Ø§Ø®ØªÙ‡\n"
    help_msg += "/dice - ØªØ§Ø³ Ø¨Ù†Ø¯Ø§Ø²\n"
    help_msg += "/spam - Û³ ØªØ§ ÙØ­Ø´ Ù¾Ø´Øª Ù‡Ù…\n"
    help_msg += "/coin - Ø´ÛŒØ± ÛŒØ§ Ø®Ø·\n"
    help_msg += "/ping - Ø³Ø±Ø¹Øª Ø¨Ø§Øª Ø±Ùˆ ØªØ³Øª Ú©Ù†\n"
    help_msg += "/time - Ø³Ø§Ø¹Øª Ùˆ ØªØ§Ø±ÛŒØ® Ø§Ù„Ø§Ù†\n"
    help_msg += "/roll <min> <max> - Ø¹Ø¯Ø¯ Ø±Ù†Ø¯ÙˆÙ… (Ù¾ÛŒØ´â€ŒÙØ±Ø¶ 1-100)\n"
    help_msg += "/stats - Ø¢Ù…Ø§Ø± Ø¨Ø§Øª\n"
    help_msg += "/score - Ø§Ù…ØªÛŒØ§Ø²Øª Ø±Ùˆ Ø¨Ø¨ÛŒÙ†\n"
    help_msg += "/guess - Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ (Ø¨Ø¹Ø¯Ø´ Ø¹Ø¯Ø¯ Ø¨ÙØ±Ø³Øª)\n"
    help_msg += "/rps - Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ (Ø¨Ø¹Ø¯Ø´ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†)\n"
    help_msg += "/rank - Ø±ØªØ¨Ù‡â€ŒØª Ø±Ùˆ Ø¨Ø¨ÛŒÙ†\n"
    help_msg += "/steal <user_id> - Ø§Ø² ÛŒÚ©ÛŒ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø¯Ø²Ø¯\n"
    help_msg += "/confess - ÛŒÙ‡ Ø§Ø¹ØªØ±Ø§Ù +18 Ø¨Ø´Ù†Ùˆ\n"
    help_msg += "/spin - Ú†Ø±Ø® Ø¨Ø®Øª Ø¨Ú†Ø±Ø®ÙˆÙ†\n"
    help_msg += "/love - Ù¾ÛŒØ§Ù… Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ +18 Ø¨Ú¯ÛŒØ±\n"
    help_msg += "/coinflip <amount> - Ø¨Ø§ Ø§Ù…ØªÛŒØ§Ø²Ø§ØªØª Ø´Ø±Ø·â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ù†\n"
    help_msg += "/roastme - ÛŒÙ‡ Ø±Ú¯Ø¨Ø§Ø± Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ú¯ÛŒØ±\n"
    help_msg += "/c - Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Û±Û°Û° Ù¾ÛŒØ§Ù… Ø¢Ø®Ø± Ú¯Ø±ÙˆÙ‡\n\n"
    
    if user_id == ADMIN_ID:
        help_msg += "Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø¯Ù…ÛŒÙ†:\n"
        help_msg += "/mute <user_id> <seconds> - Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ù…ÛŒÙˆØª Ú©Ù†\n"
        help_msg += "/unmute <user_id> - Ù…ÛŒÙˆØª Ø±Ùˆ Ø¨Ø§Ø² Ú©Ù†\n"
        help_msg += "/ban <user_id> - Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ù† Ú©Ù†\n"
        help_msg += "/unban <user_id> - Ø¨Ù† Ø±Ùˆ Ø¨Ø±Ø¯Ø§Ø±\n"
        help_msg += "/nickname <user_id> <nick> - Ù„Ù‚Ø¨ Ø¨Ø¯Ù‡\n"
        help_msg += "/listusers - Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†\n"
        help_msg += "/broadcast <message> - Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ Ø¨ÙØ±Ø³Øª\n"
        help_msg += "/addscore <user_id> <amount> - Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø¯Ù‡\n"
        help_msg += "/kick <user_id> - Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø§Ø² Ú¯Ø±ÙˆÙ‡ Ú©ÛŒÚ© Ú©Ù†\n"
        help_msg += "/warn <user_id> - Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø¯Ù‡\n"
        help_msg += "/muteall - Ù‡Ù…Ù‡ Ø±Ùˆ ØªÙˆ Ú¯Ø±ÙˆÙ‡ Ù…ÛŒÙˆØª Ú©Ù†\n"
    
    help_msg += "\nÙ‡Ø± Ú†ÛŒØ²ÛŒ Ø¨Ú¯ÛŒ Ù‡Ù… Ø¬ÙˆØ§Ø¨ Ù…ÛŒâ€ŒØ¯Ù…ØŒ Ú©Øµâ€ŒÚ©Ø´!"
    await update.message.reply_text(help_msg)
    logger.info(f"Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù†Ø¯Ù‡Ø§ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /joke
async def joke(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    random_joke = random.choice(JOKES_18)
    await update.message.reply_text(f"Ø¨Ø®Ù†Ø¯ Ú©Øµâ€ŒÚ©Ø´ {user}:\n{random_joke}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø¬ÙˆÚ© +18 Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /photo
async def photo(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    photo_url = random.choice(PHOTOS)
    await update.message.reply_photo(photo=photo_url, caption=f"Ø¨Ø±Ø§ÛŒ {user} Ø¬Ù†Ø¯Ù‡â€ŒÛŒ Ø®ÙÙ†!")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø¹Ú©Ø³ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /curse
async def curse(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    random_curse = random.choice(CURSES)
    await update.message.reply_text(f"Ø¨Ú¯ÛŒØ± {user} Ú©ÙˆÙ†ÛŒ:\n{random_curse}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"ÙØ­Ø´ +18 Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /roast
async def roast(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    random_roast = random.choice(ROASTS)
    await update.message.reply_text(f"Ø¨Ú¯ÛŒØ± Ø­Ø§Ù„ Ú©Ù† {user}:\n{random_roast}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /creator
async def creator(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS:
        return
    await update.message.reply_text(f"Ù…Ù†Ùˆ {CREATOR} Ø³Ø§Ø®ØªÙ‡ØŒ {user} Ú©Øµâ€ŒÚ©Ø´! Ø®ÙÙ†â€ŒØªØ± Ø§Ø² Ø§ÛŒÙ† Ù†Ù…ÛŒâ€ŒØ´Ù‡!")
    logger.info(f"Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø¨Ù‡ {user} Ù†Ø´ÙˆÙ† Ø¯Ø§Ø¯Ù‡ Ø´Ø¯.")

# Ø¯Ø³ØªÙˆØ± /dice
async def dice(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    await update.message.reply_dice()
    await asyncio.sleep(3)
    await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! ØªØ§Ø³ Ø§Ù†Ø¯Ø§Ø®ØªÛŒØŒ Ø­Ø§Ù„Ø§ Ø¨Ú¯Ùˆ Ú†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ!")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"ØªØ§Ø³ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /spam
async def spam(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    await update.message.reply_text(f"Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø´ {user} Ø¬Ù†Ø¯Ù‡ØŒ Ø§Ø³Ù¾Ù… ÙØ­Ø´ Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´Ù‡!")
    for i in range(3):
        random_curse = random.choice(CURSES)
        await update.message.reply_text(random_curse)
        await asyncio.sleep(1)
    SCORES[user_id] = SCORES.get(user_id, 0) + 3
    save_data()
    logger.info(f"Ø§Ø³Ù¾Ù… ÙØ­Ø´ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /coin
async def coin(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    result = random.choice(["Ø´ÛŒØ±", "Ø®Ø·"])
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ! Ù†ØªÛŒØ¬Ù‡ Ø´ÛŒØ± ÛŒØ§ Ø®Ø·: {result}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø´ÛŒØ± ÛŒØ§ Ø®Ø· Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù…: {result}")

# Ø¯Ø³ØªÙˆØ± /ping
async def ping(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    start_time = time.time()
    msg = await update.message.reply_text("Ù¾ÛŒÙ†Ú¯...")
    end_time = time.time()
    latency = round((end_time - start_time) * 1000, 2)
    await msg.edit_text(f"Ù¾ÛŒÙ†Ú¯ Ø¨Ø§Øª Ø¨Ø±Ø§ÛŒ {user} Ú©Øµâ€ŒÚ©Ø´: {latency} Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡!")
    logger.info(f"Ù¾ÛŒÙ†Ú¯ Ø¨Ø±Ø§ÛŒ {user}: {latency}ms")

# Ø¯Ø³ØªÙˆØ± /time
async def get_time(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    current_time = datetime.now().strftime("%H:%M:%S - %Y/%m/%d")
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ! Ø³Ø§Ø¹Øª Ø§Ù„Ø§Ù†: {current_time}")
    logger.info(f"Ø³Ø§Ø¹Øª Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /roll
async def roll(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    min_val = int(context.args[0]) if context.args else 1
    max_val = int(context.args[1]) if len(context.args) > 1 else 100
    result = random.randint(min_val, max_val)
    await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø¹Ø¯Ø¯ Ø±Ù†Ø¯ÙˆÙ… Ø¨ÛŒÙ† {min_val} Ùˆ {max_val}: {result}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø±Ù†Ø¯ÙˆÙ… Ø¹Ø¯Ø¯ Ø¨Ø±Ø§ÛŒ {user}: {result}")

# Ø¯Ø³ØªÙˆØ± /stats
async def stats(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    stats_msg = (
        f"Ø¢Ù…Ø§Ø± Ø¨Ø§Øª Ø¨Ø±Ø§ÛŒ {user} Ú©ÙˆÙ†ÛŒ:\n"
        f"Ú©Ø§Ø±Ø¨Ø±Ø§ÛŒ Ø¨Ù†â€ŒØ´Ø¯Ù‡: {len(BANNED_USERS)}\n"
        f"Ú©Ø§Ø±Ø¨Ø±Ø§ÛŒ Ù…ÛŒÙˆØªâ€ŒØ´Ø¯Ù‡: {len(MUTED_USERS)}\n"
        f"Ù„Ù‚Ø¨â€ŒÙ‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡: {len(NICKNAMES)}\n"
        f"Ú©Ø§Ø±Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„: {len(SCORES)}\n"
        f"Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§: {len(WARNINGS)}"
    )
    await update.message.reply_text(stats_msg)
    logger.info(f"Ø¢Ù…Ø§Ø± Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /score
async def score(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    user_score = SCORES.get(user_id, 0)
    await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø§Ù…ØªÛŒØ§Ø²Øª: {user_score}")
    logger.info(f"Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ {user}: {user_score}")

# Ø¯Ø³ØªÙˆØ± /guess
async def guess(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    number = random.randint(1, 10)
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ! ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† 1 ØªØ§ 10 Ø­Ø¯Ø³ Ø¨Ø²Ù† Ùˆ Ø¨ÙØ±Ø³Øª!")
    context.user_data["guess_number"] = number
    logger.info(f"Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¨Ø±Ø§ÛŒ {user} Ø´Ø±ÙˆØ¹ Ø´Ø¯. Ø¹Ø¯Ø¯: {number}")

# Ø¯Ø³ØªÙˆØ± /rps
async def rps(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†: Ø³Ù†Ú¯ØŒ Ú©Ø§ØºØ° ÛŒØ§ Ù‚ÛŒÚ†ÛŒØŸ")
    logger.info(f"Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ Ø¨Ø±Ø§ÛŒ {user} Ø´Ø±ÙˆØ¹ Ø´Ø¯.")

# Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø¯Ù…ÛŒÙ†
async def mute(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§ÛŒÙ†Ùˆ Ø¨Ø²Ù†Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡ Ø¨Ø¹Ø¯Ø´ Ù…Ø¯Øª Ø²Ù…Ø§Ù† (Ø«Ø§Ù†ÛŒÙ‡)!")
        return
    try:
        target_id = int(context.args[0])
        duration = int(context.args[1]) if len(context.args) > 1 else 60
        MUTED_USERS[target_id] = time.time() + duration
        save_data()
        await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø¨Ø±Ø§ÛŒ {duration} Ø«Ø§Ù†ÛŒÙ‡ Ù…ÛŒÙˆØª Ø´Ø¯! Ú©Øµâ€ŒÚ©Ø´ Ø¯ÛŒÚ¯Ù‡ Ø­Ø±Ù Ù†Ù…ÛŒâ€ŒØ²Ù†Ù‡!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ú©Ø§Ø±Ø¨Ø± {target_id} Ø±Ùˆ Ø¨Ø±Ø§ÛŒ {duration} Ø«Ø§Ù†ÛŒÙ‡ Ù…ÛŒÙˆØª Ú©Ø±Ø¯.")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ùˆ Ø²Ù…Ø§Ù† Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def unmute(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§ÛŒÙ†Ùˆ Ø¨Ø²Ù†Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        if target_id in MUTED_USERS:
            del MUTED_USERS[target_id]
            save_data()
            await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø§Ø² Ù…ÛŒÙˆØª Ø¯Ø±Ø§ÙˆÙ…Ø¯! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ú©Øµ Ø¨Ú¯Ù‡!")
            logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ú©Ø§Ø±Ø¨Ø± {target_id} Ø±Ùˆ Ø¢Ù†â€ŒÙ…ÛŒÙˆØª Ú©Ø±Ø¯.")
        else:
            await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ù…ÛŒÙˆØª Ù†Ø¨ÙˆØ¯!")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def ban(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¨Ù† Ú©Ù†Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        BANNED_USERS.add(target_id)
        if target_id in MUTED_USERS:
            del MUTED_USERS[target_id]
        save_data()
        await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø¨Ù† Ø´Ø¯! Ú¯Ù…Ø´Ùˆ Ø¯ÛŒÚ¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†ÛŒØ§Ø¯!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ú©Ø§Ø±Ø¨Ø± {target_id} Ø±Ùˆ Ø¨Ù† Ú©Ø±Ø¯.")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def unban(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§ÛŒÙ†Ùˆ Ø¨Ø²Ù†Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        if target_id in BANNED_USERS:
            BANNED_USERS.remove(target_id)
            save_data()
            await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø§Ø² Ø¨Ù† Ø¯Ø±Ø§ÙˆÙ…Ø¯! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¨Ø±Ú¯Ø±Ø¯Ù‡ Ú©Øµ Ø¨Ú¯Ù‡!")
            logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ú©Ø§Ø±Ø¨Ø± {target_id} Ø±Ùˆ Ø¢Ù†â€ŒØ¨Ø§Ù† Ú©Ø±Ø¯.")
        else:
            await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù† Ù†Ø¨ÙˆØ¯!")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def nickname(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù„Ù‚Ø¨ Ø¨Ø¯Ù‡!")
        return
    if len(context.args) < 2:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø¢ÛŒØ¯ÛŒ Ùˆ Ù„Ù‚Ø¨ Ø±Ùˆ Ø¨Ø¯Ù‡! Ù…Ø«Ù„: /nickname 123456789 Ú©ÙˆÙ†ÛŒ")
        return
    try:
        target_id = int(context.args[0])
        nick = " ".join(context.args[1:])
        NICKNAMES[target_id] = nick
        save_data()
        await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø­Ø§Ù„Ø§ Ù„Ù‚Ø¨Ø´ '{nick}' Ø´Ø¯! Ø­Ø§Ù„ Ú©Ù† Ú©Øµâ€ŒÚ©Ø´!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± {target_id} Ù„Ù‚Ø¨ '{nick}' Ø¯Ø§Ø¯.")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def list_users(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù„ÛŒØ³Øª Ø¨Ø¨ÛŒÙ†Ù‡!")
        return
    msg = "Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§:\n"
    msg += f"Ø¨Ù†â€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§: {', '.join(map(str, BANNED_USERS)) or 'Ù‡ÛŒÚ†â€ŒÚ©Ø³'}\n"
    msg += f"Ù…ÛŒÙˆØªâ€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§: {', '.join(f'{k} (ØªØ§ {datetime.fromtimestamp(v).strftime('%H:%M:%S')})' for k, v in MUTED_USERS.items()) or 'Ù‡ÛŒÚ†â€ŒÚ©Ø³'}\n"
    msg += f"Ù„Ù‚Ø¨â€ŒÙ‡Ø§: {', '.join(f'{k}: {v}' for k, v in NICKNAMES.items()) or 'Ù‡ÛŒÚ†â€ŒÚ©Ø³'}\n"
    msg += f"Ø§Ù…ØªÛŒØ§Ø²Ø§Øª: {', '.join(f'{k}: {v}' for k, v in SCORES.items()) or 'Ù‡ÛŒÚ†â€ŒÚ©Ø³'}\n"
    msg += f"Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§: {', '.join(f'{k}: {v}' for k, v in WARNINGS.items()) or 'Ù‡ÛŒÚ†â€ŒÚ©Ø³'}"
    await update.message.reply_text(msg)
    logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§ Ø±Ùˆ Ø¯ÛŒØ¯.")

async def broadcast(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ Ø¨ÙØ±Ø³ØªÙ‡!")
        return
    if not context.args:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    message = " ".join(context.args)
    for uid in set(NICKNAMES.keys()) | BANNED_USERS | set(MUTED_USERS.keys()) | set(SCORES.keys()):
        if uid != ADMIN_ID and uid not in BANNED_USERS:
            try:
                await context.bot.send_message(chat_id=uid, text=f"Ù¾ÛŒØ§Ù… Ø§Ø² AKKing:\n{message}")
                await asyncio.sleep(0.1)
            except TelegramError:
                continue
    await update.message.reply_text("Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ ÙØ±Ø³ØªØ§Ø¯Ù‡ Ø´Ø¯ØŒ Ú©Øµâ€ŒÚ©Ø´Ø§ Ø­Ø§Ù„ Ú©Ù†Ù†!")
    logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ù¾ÛŒØ§Ù… Ù‡Ù…Ú¯Ø§Ù†ÛŒ ÙØ±Ø³ØªØ§Ø¯: {message}")

async def add_score(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø¯Ù‡!")
        return
    if len(context.args) < 2:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø¢ÛŒØ¯ÛŒ Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ø§Ù…ØªÛŒØ§Ø² Ø±Ùˆ Ø¨Ø¯Ù‡! Ù…Ø«Ù„: /addscore 123456789 10")
        return
    try:
        target_id = int(context.args[0])
        amount = int(context.args[1])
        SCORES[target_id] = SCORES.get(target_id, 0) + amount
        save_data()
        await update.message.reply_text(f"Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± {target_id} {amount} Ø§Ù…ØªÛŒØ§Ø² Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯! Ø­Ø§Ù„ Ú©Ù† Ú©Øµâ€ŒÚ©Ø´!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± {target_id} {amount} Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø¯.")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

# Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¬Ø¯ÛŒØ¯
async def rank(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    sorted_scores = sorted(SCORES.items(), key=lambda x: x[1], reverse=True)
    user_rank = next((i + 1 for i, (uid, _) in enumerate(sorted_scores) if uid == user_id), None)
    user_score = SCORES.get(user_id, 0)
    await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø±ØªØ¨Ù‡â€ŒØª: {user_rank or 'Ù†Ø¯Ø§Ø±ÛŒ'}\nØ§Ù…ØªÛŒØ§Ø²Øª: {user_score}")
    logger.info(f"Ø±ØªØ¨Ù‡ {user}: {user_rank}")

async def steal(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    if not context.args:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ú©Ø³ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§Ø²Ø´ Ø¨Ø¯Ø²Ø¯ÛŒ Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        if target_id not in SCORES or target_id == user_id:
            await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! ÛŒØ§ Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ù†ÛŒØ³ØªØŒ ÛŒØ§ Ø®ÙˆØ¯ØªÛŒ!")
            return
        if random.random() < 0.1:  # 10% Ø´Ø§Ù†Ø³ Ù…ÙˆÙÙ‚ÛŒØª
            stolen = min(SCORES[target_id], 10)
            SCORES[target_id] -= stolen
            SCORES[user_id] += stolen
            await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! {stolen} Ø§Ù…ØªÛŒØ§Ø² Ø§Ø² {NICKNAMES.get(target_id, target_id)} Ø¯Ø²Ø¯ÛŒØ¯ÛŒ!")
        else:
            await update.message.reply_text(f"{user} Ø¬Ù†Ø¯Ù‡! Ù†ØªÙˆÙ†Ø³ØªÛŒ Ø¨Ø¯Ø²Ø¯ÛŒØŒ Ú©ÛŒØ±Øª Ø³ÙˆØ®Øª!")
        save_data()
        logger.info(f"{user} Ø³Ø¹ÛŒ Ú©Ø±Ø¯ Ø§Ø² {target_id} Ø¨Ø¯Ø²Ø¯Ù‡")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def confess(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    confessions = [
        "ÛŒÙ‡ Ø¨Ø§Ø± ØªÙˆ Ø­Ù…ÙˆÙ… Ú©ÛŒØ±Ù… Ø±Ùˆ Ø§Ù†Ù‚Ø¯Ø± Ù…Ø§Ù„ÛŒØ¯Ù… Ú©Ù‡ Ø¢Ø¨ Ù‚Ø·Ø¹ Ø´Ø¯!",
        "Ø¯ÛŒØ´Ø¨ Ø®ÙˆØ§Ø¨ Ø¯ÛŒØ¯Ù… Ú©Øµ Ù†Ù†Ù… Ø±Ùˆ Ú¯Ø§ÛŒÛŒØ¯Ù…ØŒ Ø­Ø§Ù„ Ø¯Ø§Ø¯!",
        "Ø¨Ù‡ Ø±ÙÛŒÙ‚Ù… Ú¯ÙØªÙ… Ú©ÙˆÙ†Ø´Ùˆ Ø¨Ø®ÙˆØ±Ù…ØŒ Ú¯ÙØª ÙÙ‚Ø· Ø§Ú¯Ù‡ Ø´Ø§Ù…Ù… Ø¨Ø¯ÛŒ!"
    ]
    confession = random.choice(confessions)
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ Ø§Ø¹ØªØ±Ø§Ù Ú©Ø±Ø¯:\n{confession}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ø§Ø¹ØªØ±Ø§Ù Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

async def spin(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    prizes = [
        ("Û±Û° Ø§Ù…ØªÛŒØ§Ø²", 10), ("ÛŒÙ‡ ÙØ­Ø´ Ø®ÙÙ†", 0), ("ÛŒÙ‡ Ú†Ø§Ù„Ø´", 0)
    ]
    prize, points = random.choice(prizes)
    if prize == "Û±Û° Ø§Ù…ØªÛŒØ§Ø²":
        SCORES[user_id] = SCORES.get(user_id, 0) + points
        msg = f"{user} Ú©Øµâ€ŒÚ©Ø´! Ú†Ø±Ø® Ø¨Ø®Øª ÙˆØ§Ø³Øª {prize} Ø¢ÙˆØ±Ø¯!"
    elif prize == "ÛŒÙ‡ ÙØ­Ø´ Ø®ÙÙ†":
        msg = f"{user} Ú©ÙˆÙ†ÛŒ! Ú†Ø±Ø® Ø¨Ø®Øª ÙˆØ§Ø³Øª {prize} Ø¢ÙˆØ±Ø¯:\n{random.choice(CURSES)}"
    else:
        msg = f"{user} Ø¬Ù†Ø¯Ù‡! Ú†Ø±Ø® Ø¨Ø®Øª ÙˆØ§Ø³Øª {prize} Ø¢ÙˆØ±Ø¯:\nØ¨Ù‡ Ø±ÙÛŒÙ‚Øª pm Ø¨Ø¯Ù‡ Ø¨Ú¯Ùˆ Ú©ÛŒØ±Ù… ØªÙˆ Ø¯Ù‡Ù†Øª!"
    await update.message.reply_text(msg)
    save_data()
    logger.info(f"Ú†Ø±Ø® Ø¨Ø®Øª Ø¨Ø±Ø§ÛŒ {user}: {prize}")

async def kick(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    chat_id = update.message.chat_id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ú©ÛŒÚ© Ú©Ù†Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    if update.message.chat.type not in ["group", "supergroup"]:
        await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± ÙÙ‚Ø· ØªÙˆ Ú¯Ø±ÙˆÙ‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        await context.bot.ban_chat_member(chat_id, target_id)
        await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø§Ø² Ú¯Ø±ÙˆÙ‡ Ú©ÛŒÚ© Ø´Ø¯! Ú¯Ù…Ø´Ùˆ Ú©Øµâ€ŒÚ©Ø´!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ú©Ø§Ø±Ø¨Ø± {target_id} Ø±Ùˆ Ø§Ø² {chat_id} Ú©ÛŒÚ© Ú©Ø±Ø¯.")
    except (ValueError, TelegramError):
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡ ÛŒØ§ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ù…!")

async def warn(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø¯Ù‡!")
        return
    if not context.args:
        await update.message.reply_text("Ø¬Ù†Ø¯Ù‡! Ø¢ÛŒØ¯ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ùˆ Ø¨Ø¯Ù‡!")
        return
    try:
        target_id = int(context.args[0])
        WARNINGS[target_id] = WARNINGS.get(target_id, 0) + 1
        save_data()
        await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ù‡Ø´Ø¯Ø§Ø± Ú¯Ø±ÙØª! ØªØ¹Ø¯Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§: {WARNINGS[target_id]}")
        if WARNINGS[target_id] >= 3:
            BANNED_USERS.add(target_id)
            await update.message.reply_text(f"Ú©Ø§Ø±Ø¨Ø± {target_id} Ø¨Ø§ Û³ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ù† Ø´Ø¯! Ú¯Ù…Ø´Ùˆ!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ø¨Ù‡ {target_id} Ù‡Ø´Ø¯Ø§Ø± Ø¯Ø§Ø¯.")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¢ÛŒØ¯ÛŒ Ø±Ùˆ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def love(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    loves = [
        "Ú©ÛŒØ±Ù… ØªÙˆ Ú©ØµØª Ø¹Ø§Ø´Ù‚ØªÙ… Ø¬Ù†Ø¯Ù‡â€ŒÛŒ Ù…Ù†!",
        "Ú©ÙˆÙ†Øª Ù…Ø«Ù„ Ù‚Ù„Ø¨Ù…Ù‡ØŒ Ù‡Ø± Ø±ÙˆØ² Ù…ÛŒâ€ŒØ®ÙˆØ§Ù… Ø¨Ú¯Ø§Ù…Ø´!",
        "Ø¹Ø´Ù‚Ù… ØªÙˆÛŒÛŒ Ú©Ù‡ Ú©ØµØªÙˆ Ù‡Ø± Ø´Ø¨ Ø®ÙˆØ§Ø¨ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù…!"
    ]
    love_msg = random.choice(loves)
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ:\n{love_msg}")
    SCORES[user_id] = SCORES.get(user_id, 0) + 1
    save_data()
    logger.info(f"Ù¾ÛŒØ§Ù… Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

async def muteall(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù‡Ù…Ù‡ Ø±Ùˆ Ù…ÛŒÙˆØª Ú©Ù†Ù‡!")
        return
    if update.message.chat.type not in ["group", "supergroup"]:
        await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± ÙÙ‚Ø· ØªÙˆ Ú¯Ø±ÙˆÙ‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡!")
        return
    duration = 60  # Û± Ø¯Ù‚ÛŒÙ‚Ù‡
    for uid in SCORES.keys():
        if uid != ADMIN_ID and uid not in BANNED_USERS:
            MUTED_USERS[uid] = time.time() + duration
    save_data()
    await update.message.reply_text(f"Ù‡Ù…Ù‡ Ú©Øµâ€ŒÚ©Ø´Ø§ Ø¨Ø±Ø§ÛŒ {duration} Ø«Ø§Ù†ÛŒÙ‡ Ù…ÛŒÙˆØª Ø´Ø¯Ù†!")
    logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} Ù‡Ù…Ù‡ Ø±Ùˆ Ù…ÛŒÙˆØª Ú©Ø±Ø¯.")

async def coinflip(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    if not context.args:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ù…Ù‚Ø¯Ø§Ø± Ø§Ù…ØªÛŒØ§Ø² Ø±Ùˆ Ø¨Ø¯Ù‡! Ù…Ø«Ù„: /coinflip 10")
        return
    try:
        amount = int(context.args[0])
        if amount <= 0 or SCORES.get(user_id, 0) < amount:
            await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! ÛŒØ§ Ø§Ù…ØªÛŒØ§Ø² Ù†Ø¯Ø§Ø±ÛŒ ÛŒØ§ Ú¯ÙˆÙ‡ Ø®ÙˆØ±Ø¯ÛŒ!")
            return
        result = random.choice(["Ø´ÛŒØ±", "Ø®Ø·"])
        if random.random() < 0.5:  # 50% Ø´Ø§Ù†Ø³ Ø¨Ø±Ø¯
            SCORES[user_id] += amount
            await update.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! {result} Ø§ÙˆÙ…Ø¯ØŒ {amount} Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø±Ø¯ÛŒ!")
        else:
            SCORES[user_id] -= amount
            await update.message.reply_text(f"{user} Ø¬Ù†Ø¯Ù‡! {result} Ø§ÙˆÙ…Ø¯ØŒ {amount} Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø§Ø®ØªÛŒ!")
        save_data()
        logger.info(f"{user} Ø´Ø±Ø·â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ø±Ø¯: {amount} - Ù†ØªÛŒØ¬Ù‡: {result}")
    except ValueError:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡!")

async def roastme(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return
    await update.message.reply_text(f"{user} Ú©ÙˆÙ†ÛŒ! Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø´ Ú©Ù‡ Ø­Ø§Ù„ØªÙˆ Ø¨Ú¯ÛŒØ±Ù…:")
    for i in range(3):
        random_roast = random.choice(ROASTS)
        await update.message.reply_text(random_roast)
        await asyncio.sleep(1)
    SCORES[user_id] = SCORES.get(user_id, 0) + 3
    save_data()
    logger.info(f"Ø±Ú¯Ø¨Ø§Ø± Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")

# Ø¯Ø³ØªÙˆØ± /c Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
async def clear_chat(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    chat_id = update.message.chat_id

    # Ú†Ú© Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ú©Ù‡ ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ø¨ØªÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù‡
    if user_id != ADMIN_ID:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÙÙ‚Ø· Ø§Ø¯Ù…ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ù¾ÛŒØ§Ù…Ø§ Ø±Ùˆ Ù¾Ø§Ú© Ú©Ù†Ù‡!")
        return
    
    # Ú†Ú© Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ú©Ù‡ ØªÙˆ Ú¯Ø±ÙˆÙ‡ Ø¨Ø§Ø´Ù‡
    if update.message.chat.type not in ["group", "supergroup"]:
        await update.message.reply_text("Ú©ÙˆÙ†ÛŒ! Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± ÙÙ‚Ø· ØªÙˆ Ú¯Ø±ÙˆÙ‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡!")
        return

    # Ú¯Ø±ÙØªÙ† Ø¢ÛŒØ¯ÛŒ Ù¾ÛŒØ§Ù… ÙØ¹Ù„ÛŒ
    message_id = update.message.message_id
    
    # Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Û±Û°Û° Ù¾ÛŒØ§Ù… Ø¢Ø®Ø± (Ø§Ø² Ù¾ÛŒØ§Ù… ÙØ¹Ù„ÛŒ Ø¨Ù‡ Ø¹Ù‚Ø¨)
    try:
        for msg_id in range(message_id, message_id - 100, -1):
            try:
                await context.bot.delete_message(chat_id=chat_id, message_id=msg_id)
                await asyncio.sleep(0.05)  # ÛŒÙ‡ ØªØ§Ø®ÛŒØ± Ú©ÙˆÚ†ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø³Ù¾Ù…
            except TelegramError:
                continue  # Ø§Ú¯Ù‡ Ù¾ÛŒØ§Ù… Ù¾Ø§Ú© Ù†Ø´Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø§Ø´Ù‡)ØŒ Ø±Ø¯Ø´ Ú©Ù†
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´Ø§! Û±Û°Û° ØªØ§ Ù¾ÛŒØ§Ù… Ø¢Ø®Ø± Ù¾Ø§Ú© Ø´Ø¯!")
        logger.info(f"Ø§Ø¯Ù…ÛŒÙ† {user_id} ØªÙˆ Ú¯Ø±ÙˆÙ‡ {chat_id} Û±Û°Û° Ù¾ÛŒØ§Ù… Ø±Ùˆ Ù¾Ø§Ú© Ú©Ø±Ø¯.")
    except TelegramError as e:
        await update.message.reply_text(f"Ú©Øµâ€ŒÚ©Ø´! ÛŒÙ‡ Ø¬Ø§ÛŒ Ú©Ø§Ø± Ú¯ÙˆÙ‡ Ø´Ø¯: {str(e)}")
        logger.error(f"Ø®Ø·Ø§ ØªÙˆ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§: {str(e)}")

# Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
async def button(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    user = query.from_user.first_name
    user_id = query.from_user.id
    if user_id in BANNED_USERS or user_id in MUTED_USERS:
        return

    if query.data == "joke":
        random_joke = random.choice(JOKES_18)
        await query.edit_message_text(f"Ø¨Ø®Ù†Ø¯ {user} Ú©ÙˆÙ†ÛŒ:\n{random_joke}")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"Ø¬ÙˆÚ© +18 Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "photo":
        photo_url = random.choice(PHOTOS)
        await query.message.reply_photo(photo=photo_url, caption=f"Ø¨Ø±Ø§ÛŒ {user} Ø¬Ù†Ø¯Ù‡!")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"Ø¹Ú©Ø³ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "curse":
        random_curse = random.choice(CURSES)
        await query.edit_message_text(f"Ø¨Ú¯ÛŒØ± {user} Ú©Øµâ€ŒÚ©Ø´:\n{random_curse}")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"ÙØ­Ø´ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "roast":
        random_roast = random.choice(ROASTS)
        await query.edit_message_text(f"Ø­Ø§Ù„ Ú©Ù† {user}:\n{random_roast}")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "creator":
        await query.edit_message_text(f"Ù…Ù†Ùˆ {CREATOR} Ø³Ø§Ø®ØªÙ‡ØŒ {user} Ú©ÙˆÙ†ÛŒ!")
        logger.info(f"Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ù‡ {user} Ù†Ø´ÙˆÙ† Ø¯Ø§Ø¯Ù‡ Ø´Ø¯.")
    elif query.data == "dice":
        await query.message.reply_dice()
        await asyncio.sleep(3)
        await query.message.reply_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! ØªØ§Ø³ Ø§Ù†Ø¯Ø§Ø®ØªÛŒØŒ Ø­Ø§Ù„Ø§ Ú†ÛŒØŸ")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"ØªØ§Ø³ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "coin":
        result = random.choice(["Ø´ÛŒØ±", "Ø®Ø·"])
        await query.edit_message_text(f"{user} Ú©ÙˆÙ†ÛŒ! Ù†ØªÛŒØ¬Ù‡ Ø´ÛŒØ± ÛŒØ§ Ø®Ø·: {result}")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"Ø´ÛŒØ± ÛŒØ§ Ø®Ø· Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user}: {result}")
    elif query.data == "time":
        current_time = datetime.now().strftime("%H:%M:%S - %Y/%m/%d")
        await query.edit_message_text(f"{user} Ú©ÙˆÙ†ÛŒ! Ø³Ø§Ø¹Øª Ø§Ù„Ø§Ù†: {current_time}")
        logger.info(f"Ø³Ø§Ø¹Øª Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif query.data == "roll":
        result = random.randint(1, 100)
        await query.edit_message_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø¹Ø¯Ø¯ Ø±Ù†Ø¯ÙˆÙ… (1-100): {result}")
        SCORES[user_id] = SCORES.get(user_id, 0) + 1
        save_data()
        logger.info(f"Ø±Ù†Ø¯ÙˆÙ… Ø¹Ø¯Ø¯ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user}: {result}")
    elif query.data == "score":
        user_score = SCORES.get(user_id, 0)
        await query.edit_message_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø§Ù…ØªÛŒØ§Ø²Øª: {user_score}")
        logger.info(f"Ø§Ù…ØªÛŒØ§Ø² Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user}: {user_score}")
    elif query.data == "guess":
        number = random.randint(1, 10)
        await query.edit_message_text(f"{user} Ú©ÙˆÙ†ÛŒ! ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¨ÛŒÙ† 1 ØªØ§ 10 Ø­Ø¯Ø³ Ø¨Ø²Ù† Ùˆ Ø¨ÙØ±Ø³Øª!")
        context.user_data["guess_number"] = number
        logger.info(f"Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} Ø´Ø±ÙˆØ¹ Ø´Ø¯. Ø¹Ø¯Ø¯: {number}")
    elif query.data == "rps":
        await query.edit_message_text(f"{user} Ú©Øµâ€ŒÚ©Ø´! Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†: Ø³Ù†Ú¯ØŒ Ú©Ø§ØºØ° ÛŒØ§ Ù‚ÛŒÚ†ÛŒØŸ")
        logger.info(f"Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ {user} Ø´Ø±ÙˆØ¹ Ø´Ø¯.")

# ØªØ§Ø¨Ø¹ Ù¾ÛŒØ§Ù… ØªØ§Ø®ÛŒØ±ÛŒ
async def delayed_message(chat_id, text, delay, context):
    await asyncio.sleep(delay)
    await context.bot.send_message(chat_id=chat_id, text=text)

# Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ (Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡)
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.lower()  # Ù…ØªÙ† Ù¾ÛŒØ§Ù… Ø±Ùˆ Ø¨Ù‡ Ø­Ø±ÙˆÙ Ú©ÙˆÚ†ÛŒÚ© ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡
    user = update.message.from_user.first_name
    user_id = update.message.from_user.id
    chat_id = update.message.chat_id
    load_data()

    # Ú†Ú© Ú©Ø±Ø¯Ù† Ø¨Ù† ÛŒØ§ Ù…ÛŒÙˆØª Ø¨ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±
    if user_id in BANNED_USERS:
        await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! Ø¨Ù† Ø´Ø¯ÛŒØŒ Ú¯Ù…Ø´Ùˆ!")
        return
    if user_id in MUTED_USERS:
        if time.time() > MUTED_USERS[user_id]:
            del MUTED_USERS[user_id]
            save_data()
        else:
            return

    nick = NICKNAMES.get(user_id, user)
    SCORES.setdefault(user_id, 0)

    # Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø¯Ù† ÙÙ‚Ø· Ø¨Ù‡ Ú©Ù„Ù…Ø§Øª Ø®Ø§Øµ ÛŒØ§ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§
    if text in RESPONSES:  # Ø§Ú¯Ù‡ Ù¾ÛŒØ§Ù… ØªÙˆ Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ RESPONSES Ø¨Ø§Ø´Ù‡
        await update.message.reply_text(RESPONSES[text])
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø¬ÙˆØ§Ø¨ Ø³ÙØ§Ø±Ø´ÛŒ '{text}' Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["Ø¹Ú©Ø³", "photo", "pic"]:
        photo_url = random.choice(PHOTOS)
        await update.message.reply_photo(photo=photo_url, caption=f"Ø¨Ø±Ø§ÛŒ {nick} Ú©Øµâ€ŒÚ©Ø´!")
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø¹Ú©Ø³ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["Ø¬ÙˆÚ©", "joke"]:
        random_joke = random.choice(JOKES_18)
        await update.message.reply_text(random_joke)  # ÙÙ‚Ø· Ø¬ÙˆÚ© Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø¬ÙˆÚ© Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["ÙØ­Ø´ Ø¨Ø¯Ù‡", "curse"]:
        random_curse = random.choice(CURSES)
        await update.message.reply_text(random_curse)  # ÙÙ‚Ø· ÙØ­Ø´ Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        SCORES[user_id] += 1
        save_data()
        logger.info(f"ÙØ­Ø´ Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ", "roast"]:
        random_roast = random.choice(ROASTS)
        await update.message.reply_text(random_roast)  # ÙÙ‚Ø· Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø­Ø§Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text == "Ø¯Ø§Ø³ØªØ§Ù†":
        story = f"ÛŒÙ‡ Ø´Ø¨ {nick} Ú©Øµâ€ŒÚ©Ø´ Ø§ÙˆÙ…Ø¯ Ù¾ÛŒØ´Ù… Ú¯ÙØª 'Ø¨ÛŒØ§ Ú©ÙˆÙ† Ø¨Ø¯ÛŒÙ…'ØŒ Ú¯ÙØªÙ… 'Ú©ÛŒØ±Ù… Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Øª!' ÛŒÙ‡Ùˆ Ú©Ø§Ù†Ø¯ÙˆÙ… Ù¾Ø§Ø±Ù‡ Ø´Ø¯ØŒ Ú¯ÙØª 'Ø­Ø§Ù„Ø§ Ú†ÛŒØŸ' Ú¯ÙØªÙ… 'Ø¨ÛŒØ§ Ø¨Ø§ Ú¯ÙˆÙ‡ Ù‡Ù… Ø­Ø§Ù„ Ú©Ù†ÛŒÙ…!' ØªØ§ ØµØ¨Ø­ ÙÙ‚Ø· Ø®Ù†Ø¯ÛŒØ¯ÛŒÙ… Ùˆ Ú©Øµâ€ŒØ®ÙˆØ±ÛŒ Ú©Ø±Ø¯ÛŒÙ…!"
        await update.message.reply_text(story)
        SCORES[user_id] += 2
        save_data()
        logger.info(f"Ø¯Ø§Ø³ØªØ§Ù† +18 Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text == "Ø³ÙˆØ±Ù¾Ø±Ø§ÛŒØ²":
        await update.message.reply_text(f"ØµØ¨Ø± Ú©Ù† {nick} Ú©ÙˆÙ†ÛŒØŒ ÛŒÙ‡ Ú†ÛŒØ² Ø®ÙÙ† Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ…!")
        await delayed_message(chat_id, random.choice(CURSES), 3, context)
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø³ÙˆØ±Ù¾Ø±Ø§ÛŒØ² Ø¨Ø§ ØªØ§Ø®ÛŒØ± Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["ØªØ§Ø³", "dice"]:
        await update.message.reply_dice()
        SCORES[user_id] += 1
        save_data()
        logger.info(f"ØªØ§Ø³ Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["Ø´ÛŒØ± ÛŒØ§ Ø®Ø·", "coin"]:
        result = random.choice(["Ø´ÛŒØ±", "Ø®Ø·"])
        await update.message.reply_text(result)  # ÙÙ‚Ø· Ù†ØªÛŒØ¬Ù‡ Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø´ÛŒØ± ÛŒØ§ Ø®Ø· Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick}: {result}")
    elif text in ["Ø³Ø§Ø¹Øª", "time"]:
        current_time = datetime.now().strftime("%H:%M:%S - %Y/%m/%d")
        await update.message.reply_text(current_time)  # ÙÙ‚Ø· Ø³Ø§Ø¹Øª Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        logger.info(f"Ø³Ø§Ø¹Øª Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick} ÙØ±Ø³ØªØ§Ø¯Ù….")
    elif text in ["Ø±Ù†Ø¯ÙˆÙ…", "roll"]:
        result = random.randint(1, 100)
        await update.message.reply_text(str(result))  # ÙÙ‚Ø· Ø¹Ø¯Ø¯ Ø±Ùˆ Ù…ÛŒâ€ŒÙØ±Ø³ØªÙ‡
        SCORES[user_id] += 1
        save_data()
        logger.info(f"Ø±Ù†Ø¯ÙˆÙ… Ø¹Ø¯Ø¯ Ø³Ø±ÛŒØ¹ Ø¨Ø±Ø§ÛŒ {nick}: {result}")
    elif "guess_number" in context.user_data:  # Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³
        try:
            guess = int(text)
            number = context.user_data["guess_number"]
            if guess == number:
                await update.message.reply_text(f"Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³Øª Ø­Ø¯Ø³ Ø²Ø¯ÛŒ! Ø¹Ø¯Ø¯ {number} Ø¨ÙˆØ¯!")
                SCORES[user_id] += 5
                del context.user_data["guess_number"]
            elif guess < number:
                await update.message.reply_text("Ø¹Ø¯Ø¯ Ø¨Ø²Ø±Ú¯â€ŒØªØ±Ù‡ØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø­Ø¯Ø³ Ø¨Ø²Ù†!")
            else:
                await update.message.reply_text("Ø¹Ø¯Ø¯ Ú©ÙˆÚ†Ú©â€ŒØªØ±Ù‡ØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø­Ø¯Ø³ Ø¨Ø²Ù†!")
            save_data()
            logger.info(f"{nick} Ø­Ø¯Ø³ Ø²Ø¯: {guess} (Ø¹Ø¯Ø¯: {number})")
        except ValueError:
            await update.message.reply_text("ÛŒÙ‡ Ø¹Ø¯Ø¯ Ø¯Ø±Ø³Øª Ø¨Ú¯Ùˆ!")
    elif text in ["Ø³Ù†Ú¯", "Ú©Ø§ØºØ°", "Ù‚ÛŒÚ†ÛŒ"]:  # Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ
        bot_choice = random.choice(["Ø³Ù†Ú¯", "Ú©Ø§ØºØ°", "Ù‚ÛŒÚ†ÛŒ"])
        if text == bot_choice:
            result = "Ù…Ø³Ø§ÙˆÛŒ Ø´Ø¯!"
        elif (text == "Ø³Ù†Ú¯" and bot_choice == "Ù‚ÛŒÚ†ÛŒ") or (text == "Ú©Ø§ØºØ°" and bot_choice == "Ø³Ù†Ú¯") or (text == "Ù‚ÛŒÚ†ÛŒ" and bot_choice == "Ú©Ø§ØºØ°"):
            result = "Ø¨Ø±Ø¯ÛŒ! Ú©ÛŒØ±Ù… ØªÙˆ Ø´Ø§Ù†Ø³ ØªÙˆ!"
            SCORES[user_id] += 3
        else:
            result = "Ø¨Ø§Ø®ØªÛŒ!"
        await update.message.reply_text(f"Ù…Ù†: {bot_choice}\n{result}")
        save_data()
        logger.info(f"Ø¨Ø§Ø²ÛŒ rps Ø¨Ø±Ø§ÛŒ {nick}: Ú©Ø§Ø±Ø¨Ø± {text}ØŒ Ø¨Ø§Øª {bot_choice}ØŒ Ù†ØªÛŒØ¬Ù‡ {result}")
    # Ø§Ú¯Ù‡ Ù‡ÛŒÚ†â€ŒÚ©Ø¯ÙˆÙ… Ø§Ø² Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø§Ù„Ø§ Ù†Ø¨ÙˆØ¯ØŒ Ø¨Ø§Øª Ú†ÛŒØ²ÛŒ Ù†Ù…ÛŒâ€ŒÚ¯Ù‡

# Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§Ù‡Ø§
async def error(update: Update, context: ContextTypes.DEFAULT_TYPE):
    logger.error(f"Ø®Ø·Ø§: {context.error}")
    await update.message.reply_text("Ú©Øµâ€ŒÚ©Ø´! ÛŒÙ‡ Ø¬Ø§ÛŒ Ú©Ø§Ø± Ú¯ÙˆÙ‡ Ø´Ø¯Ù‡ØŒ ØµØ¨Ø± Ú©Ù† Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ú¯Ùˆ!")

# ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ
def main():
    app = Application.builder().token(TOKEN).concurrent_updates(True).read_timeout(10).write_timeout(10).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("help", help_command))
    app.add_handler(CommandHandler("joke", joke))
    app.add_handler(CommandHandler("photo", photo))
    app.add_handler(CommandHandler("curse", curse))
    app.add_handler(CommandHandler("roast", roast))
    app.add_handler(CommandHandler("creator", creator))
    app.add_handler(CommandHandler("dice", dice))
    app.add_handler(CommandHandler("spam", spam))
    app.add_handler(CommandHandler("coin", coin))
    app.add_handler(CommandHandler("ping", ping))
    app.add_handler(CommandHandler("time", get_time))
    app.add_handler(CommandHandler("roll", roll))
    app.add_handler(CommandHandler("stats", stats))
    app.add_handler(CommandHandler("score", score))
    app.add_handler(CommandHandler("guess", guess))
    app.add_handler(CommandHandler("rps", rps))
    # Ø¯Ø³ØªÙˆØ±Ø§Øª Ø§Ø¯Ù…ÛŒÙ†
    app.add_handler(CommandHandler("mute", mute))
    app.add_handler(CommandHandler("unmute", unmute))
    app.add_handler(CommandHandler("ban", ban))
    app.add_handler(CommandHandler("unban", unban))
    app.add_handler(CommandHandler("nickname", nickname))
    app.add_handler(CommandHandler("listusers", list_users))
    app.add_handler(CommandHandler("broadcast", broadcast))
    app.add_handler(CommandHandler("addscore", add_score))
    # Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¬Ø¯ÛŒØ¯
    app.add_handler(CommandHandler("rank", rank))
    app.add_handler(CommandHandler("steal", steal))
    app.add_handler(CommandHandler("confess", confess))
    app.add_handler(CommandHandler("spin", spin))
    app.add_handler(CommandHandler("kick", kick))
    app.add_handler(CommandHandler("warn", warn))
    app.add_handler(CommandHandler("love", love))
    app.add_handler(CommandHandler("muteall", muteall))
    app.add_handler(CommandHandler("coinflip", coinflip))
    app.add_handler(CommandHandler("roastme", roastme))
    app.add_handler(CommandHandler("c", clear_chat))  # Ø¯Ø³ØªÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§

    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    app.add_handler(CallbackQueryHandler(button))

    app.add_error_handler(error)

    logger.info("ğŸ†ğŸ”¥ Ø¨Ø§Øª +18 AKKing Ø§Ø³ØªØ§Ø±Øª Ø®ÙˆØ±Ø¯! Ù¾Ø´Ù…Ø§ØªÙˆ Ø¢Ù…Ø§Ø¯Ù‡ Ú©Ù† Ú©Ù‡ Ú©Øµâ€ŒÚ©Ø´Ø§ Ø±Ùˆ Ø¨ØªØ±Ú©ÙˆÙ†Ù…! ğŸ”¥ğŸ†")
    app.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == '__main__':
    main()
